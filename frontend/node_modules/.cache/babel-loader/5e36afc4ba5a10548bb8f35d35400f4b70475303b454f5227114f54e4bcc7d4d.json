{"ast":null,"code":"var _jsxFileName = \"/Users/nikhilkumar/vhelp game/frontend/src/pages/Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat() {\n  _s();\n  const {\n    state\n  } = useLocation();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [timer, setTimer] = useState(180);\n  const inputRef = useRef();\n  useEffect(() => {\n    state.socket.on('chat_message', ({\n      message,\n      from\n    }) => {\n      setMessages(msgs => [...msgs, {\n        message,\n        from\n      }]);\n    });\n    state.socket.emit('start_chat', {\n      opponentSocketId: state.opponentSocketId\n    });\n    const interval = setInterval(() => {\n      setTimer(t => t - 1);\n    }, 1000);\n    return () => {\n      state.socket.off('chat_message');\n      clearInterval(interval);\n    };\n  }, [state]);\n  const sendMessage = () => {\n    if (input.trim() && input.length <= 20) {\n      state.socket.emit('chat_message', {\n        message: input,\n        to: state.opponentSocketId\n      });\n      setMessages(msgs => [...msgs, {\n        message: input,\n        from: 'me'\n      }]);\n      setInput('');\n    }\n  };\n  if (timer <= 0) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Chat ended!\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 26\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 400,\n      margin: '100px auto',\n      border: '1px solid #ccc',\n      borderRadius: 8,\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: 200,\n        marginBottom: 10\n      },\n      children: messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: msg.from === 'me' ? 'right' : 'left'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#f0f0f0',\n            borderRadius: 4,\n            padding: '2px 8px',\n            display: 'inline-block',\n            margin: '2px 0'\n          },\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        value: input,\n        maxLength: 20,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => e.key === 'Enter' && sendMessage(),\n        style: {\n          width: '80%'\n        },\n        disabled: timer <= 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        disabled: timer <= 0 || !input.trim(),\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10,\n        color: '#888'\n      },\n      children: [\"Time left: \", Math.floor(timer / 60), \":\", (timer % 60).toString().padStart(2, '0')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"Xj6VCYUiMgfVPyT9IC8nkkcKXoY=\", false, function () {\n  return [useLocation];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useLocation","jsxDEV","_jsxDEV","Chat","_s","state","messages","setMessages","input","setInput","timer","setTimer","inputRef","socket","on","message","from","msgs","emit","opponentSocketId","interval","setInterval","t","off","clearInterval","sendMessage","trim","length","to","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","border","borderRadius","padding","minHeight","marginBottom","map","msg","i","textAlign","background","display","ref","value","maxLength","onChange","e","target","onKeyDown","key","width","disabled","onClick","marginTop","color","Math","floor","toString","padStart","_c","$RefreshReg$"],"sources":["/Users/nikhilkumar/vhelp game/frontend/src/pages/Chat.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nexport default function Chat() {\n  const { state } = useLocation();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [timer, setTimer] = useState(180);\n  const inputRef = useRef();\n\n  useEffect(() => {\n    state.socket.on('chat_message', ({ message, from }) => {\n      setMessages(msgs => [...msgs, { message, from }]);\n    });\n    state.socket.emit('start_chat', { opponentSocketId: state.opponentSocketId });\n\n    const interval = setInterval(() => {\n      setTimer(t => t - 1);\n    }, 1000);\n\n    return () => {\n      state.socket.off('chat_message');\n      clearInterval(interval);\n    };\n  }, [state]);\n\n  const sendMessage = () => {\n    if (input.trim() && input.length <= 20) {\n      state.socket.emit('chat_message', { message: input, to: state.opponentSocketId });\n      setMessages(msgs => [...msgs, { message: input, from: 'me' }]);\n      setInput('');\n    }\n  };\n\n  if (timer <= 0) return <div>Chat ended!</div>;\n\n  return (\n    <div style={{ maxWidth: 400, margin: '100px auto', border: '1px solid #ccc', borderRadius: 8, padding: 20 }}>\n      <div style={{ minHeight: 200, marginBottom: 10 }}>\n        {messages.map((msg, i) => (\n          <div key={i} style={{ textAlign: msg.from === 'me' ? 'right' : 'left' }}>\n            <span style={{ background: '#f0f0f0', borderRadius: 4, padding: '2px 8px', display: 'inline-block', margin: '2px 0' }}>\n              {msg.message}\n            </span>\n          </div>\n        ))}\n      </div>\n      <div>\n        <input\n          ref={inputRef}\n          value={input}\n          maxLength={20}\n          onChange={e => setInput(e.target.value)}\n          onKeyDown={e => e.key === 'Enter' && sendMessage()}\n          style={{ width: '80%' }}\n          disabled={timer <= 0}\n        />\n        <button onClick={sendMessage} disabled={timer <= 0 || !input.trim()}>Send</button>\n      </div>\n      <div style={{ marginTop: 10, color: '#888' }}>\n        Time left: {Math.floor(timer / 60)}:{(timer % 60).toString().padStart(2, '0')}\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}